<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Resultados - Chiculol Downloader</title>
    <style>
        body {
            font-family: sans-serif;
            background-color: #1a1a1a; /* Cor de fundo caso a imagem não carregue */
            background-image: url('https://images.unsplash.com/photo-1550745165-9bc0b252726a?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: #f0f0f0;
            text-align: center;
            margin: 0;
            padding-top: 50px;
            padding-bottom: 50px;
        }
        .container {
            max-width: 800px;
            margin: auto;
            padding: 20px;
            /* EFEITO LIQUID GLASS / GLASSMORPHISM */
            background-color: rgba(255, 255, 255, 0.1); /* Fundo branco semitransparente */
            border-radius: 16px; /* Bordas mais arredondadas */
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2); /* Sombra mais suave */
            backdrop-filter: blur(12px); /* Desfoque gaussiano mais intenso */
            -webkit-backdrop-filter: blur(12px); /* Para compatibilidade com Safari */
            border: 1px solid rgba(255, 255, 255, 0.2); /* Borda sutil para o efeito de vidro */
        }
        /* Estilos para a seção expansível */
        .collapsible {
            background-color: rgba(0,0,0,0.3);
            color: #f0f0f0;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: center;
            outline: none;
            font-size: 18px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .collapsible:hover {
            background-color: rgba(0,0,0,0.4);
        }
        .content {
            padding: 0 18px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: transparent;
        }
        table { width: 100%; margin-top: 20px; border-collapse: collapse; background-color: rgba(0,0,0,0.2); }
        th, td { padding: 12px; border: 1px solid rgba(255, 255, 255, 0.1); }
        th { background-color: rgba(0,0,0,0.3); }
        .button-group { display: flex; justify-content: center; gap: 15px; margin-top: 10px; flex-wrap: wrap; }
        button { padding: 12px 24px; border: none; border-radius: 6px; font-size: 16px; cursor: pointer; transition: transform 0.1s ease, box-shadow 0.2s ease; }
        button:hover { transform: scale(1.05); box-shadow: 0 4px 12px rgba(0,0,0,0.3); }
        .btn-low { background-color: #ffc107; color: black; }
        .btn-medium { background-color: #208DFF; color: white; }
        .btn-high { background-color: #198754; color: white; }
        .btn-extreme { background-color: #dc3545; color: white; }
        .btn-audio { background-color: #6f42c1; color: white; }
        .btn-custom { background-color: #6c757d; color: white; }
        input[type="text"] { padding: 10px; margin: 0 10px; border-radius: 4px; border: 1px solid rgba(255, 255, 255, 0.2); background-color: rgba(0,0,0,0.3); color: #f0f0f0; }
        a { color: #87CEEB; text-decoration: none; } /* Cor do link alterada para combinar */
        a:hover { text-decoration: underline; }
        hr { margin: 30px 0; border: 0; border-top: 1px solid rgba(255, 255, 255, 0.2); }
        h3 { margin-top: 0; }
        .form-section { margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Resultados para: {{ video_titulo }}</h2>

        <!-- Botão para expandir/recolher a lista -->
        <button type="button" class="collapsible">Ver/Ocultar Lista Completa de Formatos</button>

        <!-- Conteúdo expansível que começa escondido -->
        <div class="content">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Extensão</th>
                        <th>Resolução</th>
                        <th>Codec</th>
                        <th>Tamanho Estimado</th>
                    </tr>
                </thead>
                <tbody>
                    {% for formato in formatos %}
                    <tr>
                        <td>{{ formato.id }}</td>
                        <td>{{ formato.ext }}</td>
                        <td>{{ formato.resolucao }}</td>
                        <td>{{ formato.codec }}</td>
                        <td>{{ formato.tamanho }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <form action="/download" method="post">
            <input type="hidden" name="url" value="{{ url_original }}">

            <hr>
            <h3>Download Rápido (Vídeo + Áudio)</h3>
            <div class="button-group">
                <button type="submit" name="qualidade" value="baixa" class="btn-low">Baixa (até 480p)</button>
                <button type="submit" name="qualidade" value="media" class="btn-medium">Média (até 720p)</button>
                <button type="submit" name="qualidade" value="alta" class="btn-high">Alta (até 1080p)</button>
                <button type="submit" name="qualidade" value="extrema" class="btn-extreme">Extrema (1440p/4K)</button>
            </div>

            <hr>

            <h3>Download Rápido (Apenas Áudio MP3)</h3>
            <div class="button-group">
                <button type="submit" name="qualidade_audio" value="baixa" class="btn-audio">Baixa</button>
                <button type="submit" name="qualidade_audio" value="media" class="btn-audio">Média</button>
                <button type="submit" name="qualidade_audio" value="alta" class="btn-audio">Alta (Melhor)</button>
            </div>

            <hr>

            <h3>Download Avançado (ID Específico)</h3>
            <div class="form-section button-group">
                <input type="text" id="format_id" name="format_id" placeholder="Digite o ID aqui (ex: 140)">
                <button type="submit" class="btn-custom">Baixar ID</button>
            </div>
        </form>

        <p style="margin-top: 30px;"><a href="/">Analisar outro vídeo</a></p>
    </div>

    <!-- Script para a funcionalidade de expandir/recolher -->
    <script>
        var coll = document.getElementsByClassName("collapsible");
        for (var i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var content = this.nextElementSibling;
                if (content.style.maxHeight){
                    content.style.maxHeight = null;
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                }
            });
        }
    </script>

</body>
</html>
